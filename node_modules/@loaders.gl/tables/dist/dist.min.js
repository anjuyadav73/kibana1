!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){(function(e){const r=n(2),s="undefined"==typeof window?e:window;s.loaders=s.loaders||{},t.exports=Object.assign(s.loaders,r)}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"loader assertion failed.")}n.r(e),n.d(e,"Schema",(function(){return s})),n.d(e,"Field",(function(){return Y})),n.d(e,"deduceTableSchema",(function(){return J})),n.d(e,"TableBatchBuilder",(function(){return V})),n.d(e,"RowTableBatch",(function(){return Z})),n.d(e,"ColumnarTableBatch",(function(){return tt})),n.d(e,"JSONLoader",(function(){return et})),n.d(e,"XMLLoader",(function(){return nt})),n.d(e,"AsyncQueue",(function(){return st})),n.d(e,"getTypeInfo",(function(){return it})),n.d(e,"DataType",(function(){return a})),n.d(e,"Null",(function(){return u})),n.d(e,"Bool",(function(){return c})),n.d(e,"Int",(function(){return l})),n.d(e,"Int8",(function(){return h})),n.d(e,"Int16",(function(){return d})),n.d(e,"Int32",(function(){return p})),n.d(e,"Int64",(function(){return f})),n.d(e,"Uint8",(function(){return y})),n.d(e,"Uint16",(function(){return m})),n.d(e,"Uint32",(function(){return g})),n.d(e,"Uint64",(function(){return w})),n.d(e,"Float",(function(){return T})),n.d(e,"Float16",(function(){return x})),n.d(e,"Float32",(function(){return A})),n.d(e,"Float64",(function(){return M})),n.d(e,"Utf8",(function(){return v})),n.d(e,"Date",(function(){return D})),n.d(e,"DateDay",(function(){return C})),n.d(e,"DateMillisecond",(function(){return N})),n.d(e,"Time",(function(){return F})),n.d(e,"TimeMillisecond",(function(){return E})),n.d(e,"TimeSecond",(function(){return B})),n.d(e,"Timestamp",(function(){return j})),n.d(e,"TimestampSecond",(function(){return L})),n.d(e,"TimestampMillisecond",(function(){return _})),n.d(e,"TimestampMicrosecond",(function(){return z})),n.d(e,"TimestampNanosecond",(function(){return $})),n.d(e,"Interval",(function(){return P})),n.d(e,"IntervalDayTime",(function(){return R})),n.d(e,"IntervalYearMonth",(function(){return X})),n.d(e,"FixedSizeList",(function(){return q}));class s{constructor(t,e=null){r(Array.isArray(t)),function(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(t),this.fields=t,this.metadata=e||new Map}compareTo(t){if(this.fields.metadata!==t.fields.metadata)return!1;if(this.fields.length!==t.fields.length)return!1;for(let e=0;e<this.fields.length;++e)if(!this.fields[e].compareTo(t.fields[e]))return!1;return!0}select(...t){const e=Object.create(null);for(const n of t)e[n]=!0;const n=t.filter(t=>e[t.name]);return new s(n,this.metadata)}selectAt(...t){const e=t.map(t=>this.fields[t]).filter(Boolean);return new s(e,this.metadata)}assign(t){let e=this.metadata,n=t;if(t instanceof s){const r=t;n=r.fields,e=i(i(new Map,this.metadata),r.metadata)}const r=Object.create(null);for(const t of this.fields)r[t.name]=t;for(const t of n)r[t.name]=t;const o=Object.values(r);return new s(o,e)}}function i(t,e){return new Map([...t||new Map,...e||new Map])}const o={NONE:0,Null:1,Int:2,Float:3,Binary:4,Utf8:5,Bool:6,Decimal:7,Date:8,Time:9,Timestamp:10,Interval:11,List:12,Struct:13,Union:14,FixedSizeBinary:15,FixedSizeList:16,Map:17,Dictionary:-1,Int8:-2,Int16:-3,Int32:-4,Int64:-5,Uint8:-6,Uint16:-7,Uint32:-8,Uint64:-9,Float16:-10,Float32:-11,Float64:-12,DateDay:-13,DateMillisecond:-14,TimestampSecond:-15,TimestampMillisecond:-16,TimestampMicrosecond:-17,TimestampNanosecond:-18,TimeSecond:-19,TimeMillisecond:-20,TimeMicrosecond:-21,TimeNanosecond:-22,DenseUnion:-23,SparseUnion:-24,IntervalDayTime:-25,IntervalYearMonth:-26};class a{static isNull(t){return t&&t.typeId===o.Null}static isInt(t){return t&&t.typeId===o.Int}static isFloat(t){return t&&t.typeId===o.Float}static isBinary(t){return t&&t.typeId===o.Binary}static isUtf8(t){return t&&t.typeId===o.Utf8}static isBool(t){return t&&t.typeId===o.Bool}static isDecimal(t){return t&&t.typeId===o.Decimal}static isDate(t){return t&&t.typeId===o.Date}static isTime(t){return t&&t.typeId===o.Time}static isTimestamp(t){return t&&t.typeId===o.Timestamp}static isInterval(t){return t&&t.typeId===o.Interval}static isList(t){return t&&t.typeId===o.List}static isStruct(t){return t&&t.typeId===o.Struct}static isUnion(t){return t&&t.typeId===o.Union}static isFixedSizeBinary(t){return t&&t.typeId===o.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===o.FixedSizeList}static isMap(t){return t&&t.typeId===o.Map}static isDictionary(t){return t&&t.typeId===o.Dictionary}get typeId(){return o.NONE}compareTo(t){return this===t}}class u extends a{get typeId(){return o.Null}get[Symbol.toStringTag](){return"Null"}toString(){return"Null"}}class c extends a{get typeId(){return o.Bool}get ArrayType(){return Uint8Array}get[Symbol.toStringTag](){return"Bool"}toString(){return"Bool"}}class l extends a{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return o.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array;default:throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}get[Symbol.toStringTag](){return"Int"}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}class h extends l{constructor(){super(!0,8)}}class d extends l{constructor(){super(!0,16)}}class p extends l{constructor(){super(!0,32)}}class f extends l{constructor(){super(!0,64)}}class y extends l{constructor(){super(!1,8)}}class m extends l{constructor(){super(!1,16)}}class g extends l{constructor(){super(!1,32)}}class w extends l{constructor(){super(!1,64)}}const b=16,S=32,I=64;class T extends a{constructor(t){super(),this.precision=t}get typeId(){return o.Float}get ArrayType(){switch(this.precision){case b:return Uint16Array;case S:return Float32Array;case I:return Float64Array;default:throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}get[Symbol.toStringTag](){return"Float"}toString(){return"Float"+this.precision}}class x extends T{constructor(){super(b)}}class A extends T{constructor(){super(S)}}class M extends T{constructor(){super(I)}}class v extends a{get typeId(){return o.Utf8}get ArrayType(){return Uint8Array}get[Symbol.toStringTag](){return"Utf8"}toString(){return"Utf8"}}const O={DAY:0,MILLISECOND:1};class D extends a{constructor(t){super(),this.unit=t}get typeId(){return o.Date}get ArrayType(){return Int32Array}get[Symbol.toStringTag](){return"Date"}toString(){return`Date${32*(this.unit+1)}<${O[this.unit]}>`}}class C extends D{constructor(){super(O.DAY)}}class N extends D{constructor(){super(O.MILLISECOND)}}const U={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9};class F extends a{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return o.Time}toString(){return`Time${this.bitWidth}<${U[this.unit]}>`}get[Symbol.toStringTag](){return"Time"}get ArrayType(){return Int32Array}}class B extends F{constructor(){super(U.SECOND,32)}}class E extends F{constructor(){super(U.MILLISECOND,32)}}class j extends a{constructor(t,e=null){super(),this.unit=t,this.timezone=e}get typeId(){return o.Timestamp}get ArrayType(){return Int32Array}get[Symbol.toStringTag](){return"Timestamp"}toString(){return`Timestamp<${U[this.unit]}${this.timezone?", "+this.timezone:""}>`}}class L extends j{constructor(t=null){super(U.SECOND,t)}}class _ extends j{constructor(t=null){super(U.MILLISECOND,t)}}class z extends j{constructor(t=null){super(U.MICROSECOND,t)}}class $ extends j{constructor(t=null){super(U.NANOSECOND,t)}}const k={DAY_TIME:0,YEAR_MONTH:1};class P extends a{constructor(t){super(),this.unit=t}get typeId(){return o.Interval}get ArrayType(){return Int32Array}get[Symbol.toStringTag](){return"Interval"}toString(){return`Interval<${k[this.unit]}>`}}class R extends P{constructor(){super(k.DAY_TIME)}}class X extends P{constructor(){super(k.YEAR_MONTH)}}class q extends a{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return o.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}get[Symbol.toStringTag](){return"FixedSizeList"}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}class Y{constructor(t,e=null,n=!1,s=new Map){r("string"==typeof t),r(!e||e instanceof a),r("boolean"==typeof n),r(!s||"object"==typeof s),this.name=t,this.type=e,this.nullable=n,this.metadata=s}get typeId(){return this.type&&this.type.typeId}clone(){return new Y(this.name,this.type,this.nullable,this.metadata)}compareTo(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}toString(){return`${this.type}${this.nullable?", nullable":""}${this.metadata?", metadata: "+this.metadata:""}`}}const W={Int8Array:new h,Int16Array:new d,Int32Array:new p,Uint8Array:new y,Uint8ClampedArray:new y,Uint16Array:new m,Uint32Array:new g,Float32Array:new A,Float64Array:new M};function H(t){const e=t.constructor&&t.constructor.name;let n=W[e];if(n)return{type:n,nullable:!1,metadata:null};let r=null;if(t.length>0){n=K(t[0]),n&&(r=new Map([["type",n.toString()]]))}return{type:new u,nullable:!0,metadata:r}}function J(t,e=null){const n=Array.isArray(t)?function(t){const e=[];if(t.length){const n=t[0];if(Array.isArray(n))for(let t=0;t<n.length;++t){const r=n[t],s=String(t),i=K(r),o=!0,a=new Map([["type",i.toString()]]);e.push(new Y(s,new u,o,a))}else for(const t in n){const r=K(n[t]),s=!0,i=new Map([["type",r.toString()]]);e.push(new Y(t,new u,s,i))}}return new s(e)}(t):function(t){const e=[];for(const n in t){const r=t[n],{type:s,nullable:i,metadata:o}=H(r);e.push(new Y(n,s,i,o||new Map))}return new s(e)}(t);return Object.assign(n,e)}function K(t){return!0===t||!1===t?new c:t instanceof Date?new _:t instanceof Number?new A:"string"==typeof t?new v:new u}"undefined"!=typeof BigInt64Array&&(W.BigInt64Array=new f,W.BigUint64Array=new w);const Q={batchSize:100};class V{constructor(t,e,n={}){this.TableBatchType=t,this.schema=e,this.options={...Q,...n},this.batch=null,this.batchCount=0,this.bytesUsed=0}addRow(t){if(!this.batch){const{TableBatchType:t}=this;this.batch=new t(this.schema,this.options)}this.batch.addRow(t)}chunkComplete(t){this.bytesUsed+=t.byteLength||t.length||0,this.batch&&this.batch.chunkComplete()}isFull(){return this.batch&&this.batch.isFull()}hasBatch(){return Boolean(this.batch)}getBatch(t={}){if(Number.isFinite(t.bytesUsed)&&(this.bytesUsed=t.bytesUsed),this.batch){const e=this.batch.getBatch();return this.batch=null,e.count=this.batchCount,this.batchCount++,e.bytesUsed=this.bytesUsed,Object.assign(e,t),e}return null}}const G={batchSize:"auto",convertToObject:!0};class Z{constructor(t,e={}){if(e={...G,...e},this.schema=t,this.batchSize=e.batchSize,this.convertToObject=e.convertToObject,this.rows=null,this.length=0,this.isChunkComplete=!1,this.cursor=0,!Array.isArray(t)){this._headers=[];for(const e in t)this._headers[t[e].index]=t[e].name}}addRow(t,e=null){this.rows||(this.rows=new Array(this.batchSize),this.length=0),Number.isFinite(e)&&(this.cursor=e);const n=this.convertToObject&&this.schema;this.rows[this.length]=n?function(t,e){if(!t)throw new Error("null row");if(!Array.isArray(t))return t;if(!e)return t;const n={};for(let r=0;r<e.length;r++)n[e[r]]=t[r];return n}(t,this._headers):t,this.length++}chunkComplete(){this.isChunkComplete=!0}isFull(){return"auto"===this.batchSize?this.isChunkComplete&&this.length>0:this.rows&&this.length>=this.batchSize}getBatch(){if(this.rows){const t=this.rows.slice(0,this.length);return this.rows=null,this.isChunkComplete=!1,{data:t,schema:this.schema,length:t.length,cursor:this.cursor}}return null}}class tt{constructor(t,e={}){this.schema=t,this.batchSize=e.batchSize||"auto",this.length=0,this.allocated=0,this.columns=null,this.isChunkComplete=!1,this.reallocateColumns()}addRow(t){this.reallocateColumns();for(const e in t)this.columns[e][this.length]=t[e];this.length++}chunkComplete(){this.isChunkComplete=!0}isFull(){return"auto"===this.batchSize?this.isChunkComplete:this.length>=this.allocated}getBatch(t={}){this.pruneColumns();const e=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const t in this.schema){const n=this.schema[t];e[n.name]=this.columns[n.index]}return this.columns=null,this.isChunkComplete=!1,{data:e,schema:this.schema,length:this.length}}reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:this.batchSize,this.columns=[];for(const t in this.schema){const e=this.schema[t],n=e.type||Float32Array,r=this.columns[e.index];if(r&&ArrayBuffer.isView(r)){const t=new n(this.allocated);t.set(r),this.columns[e.index]=t}else r?(r.length=this.allocated,this.columns[e.index]=r):this.columns[e.index]=new n(this.allocated)}}}pruneColumns(){this.columns=this.columns.map(t=>t.slice(0,this.length))}}var et={name:"JSON",extensions:["json"],testText:null,parseTextSync:function(t,e){return JSON.parse(t)}};var nt={name:"KML",extensions:["kml"],supported:!("undefined"==typeof window||!window.DOMParser&&(void 0===window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))),testText:function(t){return t.startsWith("<?xml")},parseTextSync:function(t){if(window.DOMParser){const e=(new window.DOMParser).parseFromString(t,"application/xml"),n=function(t){const e=new DOMParser,n=e.parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;if("http://www.w3.org/1999/xhtml"===n){const e=t.getElementsByTagName("parsererror");return e.length?e[0].innerHTML:null}return t.getElementsByTagNameNS(n,"parsererror").length>0}(e);if(n)throw new Error(n);return e}if(void 0!==window.ActiveXObject){const e=new window.ActiveXObject("Microsoft.XMLDOM");if(e)return e.async="false",e.loadXML(t),e}throw new Error("No XML parser available")},browserOnly:!0,worker:!1};class rt extends Array{enqueue(t){return this.push(t)}dequeue(){return this.shift()}}class st{constructor(){this._values=new rt,this._settlers=new rt,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[Symbol.asyncIterator](){return this}enqueue(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");const e=this._settlers.dequeue();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.enqueue(t)}next(){if(this._values.length>0){const t=this._values.dequeue();return t instanceof Error?Promise.reject(t):Promise.resolve({value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((t,e)=>{this._settlers.enqueue({resolve:t,reject:e})})}}function it(t){return{typeId:t.typeId,ArrayType:t.ArrayType,typeName:t.toString(),typeEnumName:at(t.typeId),precision:t.precision}}let ot=null;function at(t){if(!ot){ot={};for(const t in o)ot[o[t]]=t}return ot[t]}}])}));