{"version":3,"sources":["../../../../src/lib/streaming/binary-reader.js"],"names":["BinaryReader","arrayBuffer","offset","bytes","byteLength","hasAvailableBytes","Error","dataView","DataView"],"mappings":";;;;;;;;;;;;;IAAqBA,Y;AACnB,wBAAYC,WAAZ,EAAyB;AAAA;AAEvB,SAAKC,MAAL,GAAc,CAAd;AAEA,SAAKD,WAAL,GAAmBA,WAAnB;AACD;;;;sCAEiBE,K,EAAO;AACvB,aAAO,KAAKF,WAAL,CAAiBG,UAAjB,GAA8B,KAAKF,MAAnC,IAA6CC,KAApD;AACD;;;gCAGWA,K,EAAO;AACjB,UAAIA,KAAK,IAAI,CAAC,KAAKE,iBAAL,CAAuBF,KAAvB,CAAd,EAA6C;AAC3C,cAAM,IAAIG,KAAJ,CAAU,uBAAV,CAAN;AACD;;AAED,UAAMC,QAAQ,GAAGJ,KAAK,GAClB,IAAIK,QAAJ,CAAa,KAAKP,WAAlB,EAA+B,KAAKC,MAApC,EAA4CC,KAA5C,CADkB,GAElB,IAAIK,QAAJ,CAAa,KAAKP,WAAlB,EAA+B,KAAKC,MAApC,CAFJ;AAGA,WAAKA,MAAL,IAAeC,KAAf;AACA,aAAOI,QAAP;AACD;;;yBAEIJ,K,EAAO;AACV,WAAKD,MAAL,IAAeC,KAAf;AACD;;;2BAEMA,K,EAAO;AACZ,WAAKD,MAAL,IAAeC,KAAf;AACD","sourcesContent":["export default class BinaryReader {\n  constructor(arrayBuffer) {\n    /** current global (stream) offset */\n    this.offset = 0;\n    /** current buffer from iterator */\n    this.arrayBuffer = arrayBuffer;\n  }\n\n  hasAvailableBytes(bytes) {\n    return this.arrayBuffer.byteLength - this.offset >= bytes;\n  }\n\n  // Get the required number of bytes from the iterator\n  getDataView(bytes) {\n    if (bytes && !this.hasAvailableBytes(bytes)) {\n      throw new Error('binary data exhausted');\n    }\n\n    const dataView = bytes\n      ? new DataView(this.arrayBuffer, this.offset, bytes)\n      : new DataView(this.arrayBuffer, this.offset);\n    this.offset += bytes;\n    return dataView;\n  }\n\n  skip(bytes) {\n    this.offset += bytes;\n  }\n\n  rewind(bytes) {\n    this.offset -= bytes;\n  }\n}\n"],"file":"binary-reader.js"}