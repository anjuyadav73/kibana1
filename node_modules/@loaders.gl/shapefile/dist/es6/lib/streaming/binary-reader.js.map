{"version":3,"sources":["../../../../src/lib/streaming/binary-reader.js"],"names":["BinaryReader","constructor","arrayBuffer","offset","hasAvailableBytes","bytes","byteLength","getDataView","Error","dataView","DataView","skip","rewind"],"mappings":"AAAA,eAAe,MAAMA,YAAN,CAAmB;AAChCC,EAAAA,WAAW,CAACC,WAAD,EAAc;AAEvB,SAAKC,MAAL,GAAc,CAAd;AAEA,SAAKD,WAAL,GAAmBA,WAAnB;AACD;;AAEDE,EAAAA,iBAAiB,CAACC,KAAD,EAAQ;AACvB,WAAO,KAAKH,WAAL,CAAiBI,UAAjB,GAA8B,KAAKH,MAAnC,IAA6CE,KAApD;AACD;;AAGDE,EAAAA,WAAW,CAACF,KAAD,EAAQ;AACjB,QAAIA,KAAK,IAAI,CAAC,KAAKD,iBAAL,CAAuBC,KAAvB,CAAd,EAA6C;AAC3C,YAAM,IAAIG,KAAJ,CAAU,uBAAV,CAAN;AACD;;AAED,UAAMC,QAAQ,GAAGJ,KAAK,GAClB,IAAIK,QAAJ,CAAa,KAAKR,WAAlB,EAA+B,KAAKC,MAApC,EAA4CE,KAA5C,CADkB,GAElB,IAAIK,QAAJ,CAAa,KAAKR,WAAlB,EAA+B,KAAKC,MAApC,CAFJ;AAGA,SAAKA,MAAL,IAAeE,KAAf;AACA,WAAOI,QAAP;AACD;;AAEDE,EAAAA,IAAI,CAACN,KAAD,EAAQ;AACV,SAAKF,MAAL,IAAeE,KAAf;AACD;;AAEDO,EAAAA,MAAM,CAACP,KAAD,EAAQ;AACZ,SAAKF,MAAL,IAAeE,KAAf;AACD;;AA/B+B","sourcesContent":["export default class BinaryReader {\n  constructor(arrayBuffer) {\n    /** current global (stream) offset */\n    this.offset = 0;\n    /** current buffer from iterator */\n    this.arrayBuffer = arrayBuffer;\n  }\n\n  hasAvailableBytes(bytes) {\n    return this.arrayBuffer.byteLength - this.offset >= bytes;\n  }\n\n  // Get the required number of bytes from the iterator\n  getDataView(bytes) {\n    if (bytes && !this.hasAvailableBytes(bytes)) {\n      throw new Error('binary data exhausted');\n    }\n\n    const dataView = bytes\n      ? new DataView(this.arrayBuffer, this.offset, bytes)\n      : new DataView(this.arrayBuffer, this.offset);\n    this.offset += bytes;\n    return dataView;\n  }\n\n  skip(bytes) {\n    this.offset += bytes;\n  }\n\n  rewind(bytes) {\n    this.offset -= bytes;\n  }\n}\n"],"file":"binary-reader.js"}